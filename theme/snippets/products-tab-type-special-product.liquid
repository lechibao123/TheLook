{%- assign _product = block.settings.product -%}
{%- assign _image_position = block.settings.special_product_position -%}

{% unless _collection == blank or collection.products_count == 0 %}

  <div class="hp-tabs-list-wrapper{% unless _product == blank %} special-product-true{% endunless %} position-{{ _image_position }}">

    {% if _image_position == 'middle' %}
      <div class="hp-tabs-list tabs-list-row">
        <div class="row">

          <div class="hp-tabs-product col-lg-4 col-md-12 col-sm-12 col-12">
            <div class="block-product row">
              {% for product in collection.products limit: 4 %}
              <div class="product-grid-item col-lg-6 col-md-3 col-sm-6 col-12">
                {% include 'product-item' %}
              </div>
              {% endfor %}
            </div>
          </div>

          {% unless _product == blank %}
          <div class="hp-tabs-special col-lg-4 col-md-12 col-sm-12 col-12">
            <div class="block-special-product listing-sp-{{ block.id }}">
              {%- assign product = all_products[_product] -%}
              {% include 'special-product-item' %}
            </div>
          </div>
          {% endunless %}

          <div class="hp-tabs-product col-lg-4 col-md-12 col-sm-12 col-12">
            <div class="block-product row">
              {% for product in collection.products offset: 4 limit: 4 %}
              <div class="product-grid-item col-lg-6 col-md-3 col-sm-6 col-12">
                {% include 'product-item' %}
              </div>
              {% endfor %}
            </div>
          </div>

        </div>
      </div>
    
    {% elsif _image_position == 'middle-2' %}
      <div class="hp-tabs-list tabs-list-row">
          <div class="row">

            <div class="hp-tabs-product col-lg-3 col-md-3 col-sm-12 col-12">
              <div class="block-product row">
                {% for product in collection.products limit: 2 %}
                <div class="product-grid-item col-lg-12 col-md-12 col-sm-6 col-12">
                  {% include 'product-item' %}
                </div>
                {% endfor %}
              </div>
            </div>

            {% unless _product == blank %}
            <div class="hp-tabs-special col-lg-6 col-md-6 col-sm-12 col-12">
              <div class="block-special-product listing-sp-{{ block.id }}">
                {%- assign product = all_products[_product] -%}
                {% include 'special-product-item' %}
              </div>
            </div>
            {% endunless %}

            <div class="hp-tabs-product col-lg-3 col-md-3 col-sm-12 col-12">
              <div class="block-product row">
                {% for product in collection.products offset: 2 limit: 2 %}
                <div class="product-grid-item col-lg-12 col-md-12 col-sm-6 col-12">
                  {% include 'product-item' %}
                </div>
                {% endfor %}
              </div>
            </div>

          </div>
        </div>
    
    {% else %}

      {% unless _product == blank %}
        <div class="hp-tabs-special hp-tabs-special-product">
          <div class="block-special-product listing-sp-{{ block.id }}">
            {%- assign product = all_products[_product] -%}
            {% include 'special-product-item' %}
          </div>
        </div>
      {% endunless %}

      <div class="hp-tabs-list tabs-list-row">
        <div class="row">

          {% for product in collection.products limit: _limit %}
            <div class="product-grid-item {{ _desktop_class }} {{ _tablet_class }} {{ _mobile_class }}">
              {% include 'product-item' %}
            </div>
          {% endfor %}

        </div>
      </div>

    {% endif %}

  </div>

{% else %}

  <div class="hp-tabs-list-wrapper special-product-true position-left">
    
    <div class="hp-tabs-special hp-tabs-special-product">
      <div class="block-special-product">
        {{ emptySpecialProduct }}
      </div>
    </div> 

    <div class="hp-tabs-list tabs-list-row">
      <div class="row">
        {{ emptyProduct }}
      </div>
    </div>

  </div>

{% endunless %}